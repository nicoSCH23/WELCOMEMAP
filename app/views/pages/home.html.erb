<div class="container">
  <div class="row">
    <h1>SoliMap</h1>
  	<div class="col-xs-12 col-md-8" id="map" data-markers="<%= @markers.to_json %>">

    </div>
    <div class="col-xs-12 col-md-4">
      <%= form_tag(root_path, method: :get) do %>
      <h4>Location</h4>
        <div class="searchbar">
          <%= text_field_tag 'location', nil, placeholder: 'Ile de France', size: 30, id: "search-location" %>
        </div>
      <h4>Categories</h4>
        <ul>
          <% @categories.each do |category| %>
            <li>
              <label class="category-option btn btn-chore btn-small btn-block" id="label-<%= category.split.first %>" for="<%= category.split.first %>">
                 <%= check_box_tag "category[]", category, @params[:category].include?(category), id: category.split.first, class: "category-checkbox", style: 'visibility: hidden' %>
                 <%= render partial: 'components/category_card', locals: { category: category } %>
              </label>
            </li>
          <% end %>
        </ul>
      <div class="submit-search-container">
        <%= submit_tag("Search", class: "btn btn-primary") %>
      </div>
      <% end %>
    </div>
  </div>

  <div class="row col-xs-12 col-md-8 container card-presentation">
    <div>
      <h4 class="result-title">Results</h4>
    </div>
    <div>

      <% @params[:category].each do |category| %>
        <button class="category-list active btn btn-chore btn-small btn-block" type="button" data-toggle="collapse" data-target="#collapse<%= category.split.first %>" aria-expanded="false" aria-controls="collapse<%= category.split.first %>">
            <%= image_tag "#{category.split.first}.png", height: 25, class: "category-icon" %>
            <span class="category-name">
              <%= category %>
            </span>
        </button>
        <div class="collapse in" id="collapse<%= category.split.first %>">
            <% @services.where(category: category).each do |service| %>
              <%= render partial: 'components/service_card', locals: { service: service } %>
            <% end %>
        </div>
      <% end %>

    </div>
  </div>
</div>
